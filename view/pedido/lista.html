<html>

<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_purple-indigo.min.css" />
  <link rel="stylesheet" href="../css/main.css" />
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="../js/knockout-3.5.1.js"></script>
  <script src="../js/pedido.vm.js"></script>
</head>

<body>
  <h2>
    Lista de Pedidos
    <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" data-bind="click: add">
      <i class="material-icons">add</i>
    </button>
  </h2>
  <div class="mdl-select">
      <label for="cliente">Selecione um cliente</label>
      <select id="cliente" data-bind="options: clientes,
          optionsText: 'nome',
          optionsValue: 'idCliente',
          value: idCliente,
          optionsCaption: 'Selecione um cliente...'"></select>
  </div>
  <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" data-bind="click: loadPedidos" style="margin: 10px 0">
      Buscar
  </button>
  <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp">
    <thead>
      <tr>
        <th class="mdl-data-table__cell--non-numeric">Id Pedido</th>
        <th class="mdl-data-table__cell--non-numeric">Data</th>
        <th>Valor</th>
      </tr>
    </thead>
    <tbody data-bind="foreach: pedidos">
      <tr>
        <td class="mdl-data-table__cell--non-numeric" data-bind="text: idPedido"></td>
        <td class="mdl-data-table__cell--non-numeric" data-bind="text: data"></td>
        <td data-bind="text: valor"></td>
        <td><a data-bind="attr: {href: 'produto/adicionar.html#' + idPedido + ',' + $parent.idCliente()}">adicionar produto</a></td>
        <td><a data-bind="attr: {href: 'produto/lista.html#' + idPedido + ',' + $parent.idCliente()}">listar produtos</a></td>
      </tr>
    </tbody>
  </table>
</body>

<script>
  let pedidoVm = new PedidoViewModel()
  ko.applyBindings(pedidoVm)
</script>
<script src="../js/main.js"></script>

</html>